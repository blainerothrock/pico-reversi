pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
// main

function _init()
end

function _update()
	if (state==1) then
		move_player(p1)
	elseif (state==2) then
		move_player(p2)
	else
	end
end

function _draw()
	cls()
	map(0,0,0,0,128,128,1)
	render_board()
	if (state==1) then
		render_player(p1)
	elseif (state==2) then
		render_player(p2)
	else
	end
	// palt(0,true)
end
-->8
// draw

function render_board()
	i=0
	foreach(board, function(row)
		j=0
		foreach(row, function(state)
			if (state==1) then
				// draw white
				x=min_x + (spr_size * i)
				y=min_y + (spr_size * j)
				spr(3,x,y)
			elseif (state==2) then
			 // draw black
			 palt(0,false)
			 palt(1,true)
			 x=min_x + (spr_size * i)
			 y=min_x + (spr_size * j)
			 spr(4,x,y)
			 palt(1,false)
			 palt(0,true)
			end
			j+=1
		end)
		i+=1
	end)
end

function render_player(p)
	x=min_x + (spr_size * p.x)
	y=min_y + (spr_size * p.y)
	spr(p.sel_spr,x,y)	
end
-->8
// update

function move_player(p)
	if (btnp(⬆️) and p.y > 0) then
		p.y-=1
	elseif (btnp(➡️) and p.x < 7) then
		p.x+=1
	elseif (btnp(⬅️) and p.x > 0) then
		p.x-=1
	elseif (btnp(⬇️) and p.y < 7) then
		p.y+=1
	elseif (btnp(❎)) then
		print('todo: place')
		if can_place(p) then
			board[p.x+1][p.y+1] = p.id
			// todo: update & end turn 
		end
	end
end
-->8
// init (state)
state = 1

board = {
	{0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0},
	{0,0,0,1,2,0,0,0},
	{0,0,0,2,1,0,0,0},
	{0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0},
	{0,0,0,0,0,0,0,0}
}
									
piece = {
	n=0,
	w=1,
	b=2
}

p1 = {
	peice = piece.w,
	opp = piece.b,
	x = 0,
	y = 0,
	sel_spr = 5
}
p2 = {
	peice = piece.b,
	opp = piece.w,
	x = 0,
	y = 0,
	sel_spr = 6
}

									
spr_size = 8									
min_x = (120 * 0.25) + 2
min_y = (120 * 0.25) + 2
max_x = 120 * 0.75 - spr_size
max_y = 120 * 0.75 - spr_size

direction = {
	up=0,
	left=2,
	right=3,
	down=4,
	upleft=5,
	upright=6,
	downleft=7,
	downright=8
}


-->8
// gameplay
function can_place(p)
	// check up
	// check right
	// check left
	// check down
	return true
end

function check_dir(d,p)
	x = p.x+1
	y = p.y+1
	if (d==direction.up) then
	 // todo 
	end
end
__gfx__
0000000033333333bbbbbbbb000770001110011188888888cccccccc000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333bbbbbbbb007777001100001180000008c000000c000000000000000000000000000000000000000000000000000000000000000000000000
0070070033333333bbbbbbbb077777701000000180000008c000000c000000000000000000000000000000000000000000000000000000000000000000000000
0007700033333333bbbbbbbb777777770000000080000008c000000c000000000000000000000000000000000000000000000000000000000000000000000000
0007700033333333bbbbbbbb777777770000000080000008c000000c000000000000000000000000000000000000000000000000000000000000000000000000
0070070033333333bbbbbbbb077777701000000180000008c000000c000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333bbbbbbbb007777001100001180000008c000000c000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333bbbbbbbb000770001110011188888888cccccccc000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001010000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001020102010201020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000002010201020102010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001020102010201020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000002010201020102010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001020102010201020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000002010201020102010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001020102010201020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000002010201020102010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
